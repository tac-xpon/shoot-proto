use crate::bgsp_lib::bgsp_common::{Rgba, NUM_PALETTE_TBL, NUM_PALETTE_COL};

pub const NUM_BG_PALETTE_COL: usize = 4;

pub static COLOR_TBL: [[Rgba<u8>; NUM_PALETTE_COL]; NUM_PALETTE_TBL] = {
    let mut tbl: [[Rgba<u8>; NUM_PALETTE_COL]; NUM_PALETTE_TBL] = [[Rgba([0, 0, 0, 0]); NUM_PALETTE_COL]; NUM_PALETTE_TBL];
    let mut idx = 0;
    while idx < NUM_PALETTE_TBL {
        let mut pos = 0;
        while pos < NUM_BG_PALETTE_COL {
            let bgr_val = BG_PALS[idx][pos];
            let r = (((bgr_val       ) & 0b11111) << 3) as u8;
            let g = (((bgr_val >>  5 ) & 0b11111) << 3) as u8;
            let b = (((bgr_val >> 10 ) & 0b11111) << 3) as u8;
            let a = if bgr_val == 0 { 0 } else { 255 };
            tbl[idx][pos] = Rgba([r, g, b, a]);
            pos += 1;
        }
        idx += 1;
    }
    tbl
};

const BG_PALS: [[u16; NUM_BG_PALETTE_COL]; NUM_PALETTE_TBL] = [
    // 0 ~ 15
    [0x0000,0x0000,0x0000,0x0000],
    [0x0000,0x6f7b,0x0000,0x6f7b],
    [0x0000,0x001b,0x0000,0x001b],
    [0x0000,0x0360,0x0000,0x0360],
    [0x0000,0x037b,0x0000,0x037b],
    [0x2108,0x000d,0x49ad,0x4a52],
    [0x0000,0x2108,0x49ad,0x4a52],
    [0x0000,0x4a52,0x2108,0x21b7],
    [0x21b7,0x21b7,0x4a52,0x4a52],
    [0x4a52,0x4a52,0x0000,0x0000],
    [0x2108,0x2108,0x4a52,0x4a52],
    [0x4a52,0x4a52,0x4a52,0x4a52],
    [0x21b7,0x21b7,0x21b7,0x21b7],
    [0x21b7,0x21b7,0x0000,0x0000],
    [0x0000,0x2097,0x0000,0x2097],
    [0x0000,0x2097,0x21b7,0x0000],
    // 16 ~ 31
    [0x21b7,0x21b7,0x210d,0x210d],
    [0x0000,0x2252,0x0000,0x2252],
    [0x0000,0x037b,0x2252,0x6f7b],
    [0x0000,0x6c00,0x037b,0x2252],
    [0x0000,0x0000,0x6f7b,0x6f7b],
    [0x0000,0x0000,0x2252,0x2252],
    [0x0000,0x21b7,0x4a52,0x6f7b],
    [0x0000,0x21b7,0x210d,0x4a52],
    [0x0000,0x2108,0x4a52,0x6f7b],
    [0x0000,0x001b,0x4a52,0x6f7b],
    [0x0000,0x037b,0x01bb,0x6f7b],
    [0x0000,0x2252,0x210d,0x4a52],
    [0x0000,0x21b7,0x210d,0x6f7b],
    [0x0000,0x2108,0x0000,0x2108],
    [0x0000,0x0000,0x4a52,0x4a52],
    [0x0000,0x6ee4,0x6f7b,0x001b],
    // 32 ~ 47
    [0x0000,0x6c00,0x2252,0x6f7b],
    [0x0000,0x6c00,0x2252,0x6ee4],
    [0x0000,0x6c00,0x037b,0x6f7b],
    [0x0000,0x037b,0x6ee4,0x000d],
    [0x0000,0x6c00,0x2252,0x0000],
    [0x0000,0x001b,0x6c00,0x037b],
    [0x0000,0x001b,0x6c00,0x2252],
    [0x0000,0x0000,0x21b7,0x21b7],
    [0x0000,0x0000,0x0360,0x0360],
    [0x0000,0x0000,0x6ee4,0x6ee4],
    [0x0000,0x6ee4,0x0000,0x6ee4],
    [0x0000,0x4a52,0x01bb,0x0360],
    [0x0000,0x6f7b,0x01bb,0x6ee4],
    [0x0000,0x037b,0x001b,0x0000],
    [0x0000,0x000d,0x2252,0x0000],
    [0x0000,0x6c00,0x6c00,0x037b],
    // 48 ~ 63
    [0x0000,0x6c00,0x6c00,0x2252],
    [0x0000,0x0360,0x2252,0x6f7b],
    [0x0000,0x001b,0x2252,0x6f7b],
    [0x0000,0x21b7,0x2252,0x037b],
    [0x0000,0x21b7,0x210d,0x2252],
    [0x0000,0x001b,0x6f7b,0x001b],
    [0x0000,0x0360,0x6f7b,0x001b],
    [0x0000,0x2252,0x6f7b,0x001b],
    [0x0000,0x01bb,0x6f7b,0x001b],
    [0x0000,0x2097,0x6f7b,0x001b],
    [0x0000,0x4a52,0x2252,0x6f7b],
    [0x0000,0x0360,0x2252,0x6f7b],
    [0x0000,0x6ee4,0x6c00,0x6f7b],
    [0x0000,0x6c00,0x4a52,0x6f7b],
    [0x0000,0x21b7,0x210d,0x000d],
    [0x0000,0x21b7,0x000d,0x210d],
];
